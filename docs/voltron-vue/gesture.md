# 手势系统

> **注意：** 不同组件所支持的手势是不一致的，具体支持情况需要在组件介绍里查看

## 点击事件

点击事件包括长按、点击、按下、抬手4种类型，分别由以下4种接口通知：

1. click：当控件被点击时，会回调此函数；
2. pressIn：在长按或点击时，用户开始触屏（即用户按下手指时）该控件时，此函数会被调用；
3. pressOut：在长按或点击时，用户结束触屏（即用户抬起手指时）该控件时，此函数会被调用；
4. longClick：当控件被长按时，此函数会被调用；

`pressIn`和`pressOut`可以用来配合做一些点击态的事情

### 范例

``` html
<div
  @click="onEvent($event, 'click')"
  @longClick="onEvent($event, 'longClick')"
  @pressIn="onEvent($event, 'pressIn')"
  @pressOut="onEvent($event, 'pressOut')"
>
</div>
```

## 触屏事件

触屏事件的处理与点击事件类似，可以再任何React组件上使用，touch事件主要由以下几个回调函数组成：

1. touchDown(event)：当用户开始触屏控件时（即用户在该控件上按下手指时），将回调此函数，并将触屏点信息作为参数传递进来；
2. touchMove(event)：当用户在控件移动手指时，此函数会持续收到回调，并通过event参数告知控件的触屏点信息；
3. touchEnd(event)：当触屏操作结束，用户在该控件上抬起手指时，此函数将被回调，event参数也会通知当前的触屏点信息；
4. touchCancel(event)：当用户触屏过程中，某个系统事件中断了触屏，例如电话呼入、组件变化（如设置为hidden），此函数会收到回调，触屏点信息也会通过event参数告知前端；

注意：若touchCancel被触发，则touchEnd不会被触发

以上回调函数均带有一个参数event，该数据包含以下结构：

* name：该触屏事件的名称，分别对应为“onTouchDown“、“onTouchMove”、"onTouchEnd"、“onTouchCancel”；
* id：接收触屏事件的目标控件的id，即触屏点所在控件的id；
* page_x：触屏点相对于根元素的横坐标；
* page_y：触屏点相对于根元素的纵坐标；

以上结构中的x和y坐标已经经过转换，与屏幕分辨率无关的单位，例如onTouchDonw回调的event参数结构如下：

```json
{ page_y: 172.27392578125, id: 6574, page_x: 532.6397094726562 }
```

## 事件冒泡

点击事件和触屏事件均可以在回调函数中定义是否需要冒泡该事件到上层组件，点击或触屏事件发生时，终端会寻找该触屏点下声明了要处理该事件的最小控件：

1. 使用`evt.stopPropagation();`：控件处理完事件后，将不再继续冒泡，整个手势事件处理结束；
2. 不禁用事件冒泡：控件处理完事件后，事件将继续往上一层冒泡，如果找到某个父控件也设置了对应事件处理函数，则会调用改该回调函数，并再次根据其返回值决定是否继续冒泡。如果再向上冒泡的过程中达到了根节点，则事件冒泡结束；